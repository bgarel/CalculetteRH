var CalculetteRH;!function(t){"use strict";var e=function(){function t(t){this.moment=t;var e=t();this.dateFinStr=e.format("DD/MM/YYYY"),this.isDateValid=!1}return t.prototype.updateAnciennete=function(){var t=0,e=0,s=0,i=moment(this.dateEntreeStr,"DD/MM/YYYY"),n=moment(this.dateFinStr,"DD/MM/YYYY");if(!i.isValid()||!n.isValid()||n.diff(i,"year")>200||n.diff(i,"year")<0)return void(this.isDateValid=!1);if(this.isDateValid=!0,e=n.diff(i,"year"),s=n.diff(i,"month")-12*e,i.date()<=n.date())t=n.date()-i.date();else{var a=moment({year:n.year(),month:n.month(),day:i.date()}).subtract(1,"month");t=n.diff(a,"days")}this.anciennete=n.diff(i,"year",!0);var r=e+" an(s)";s>0&&(r+=", "+s+" mois"),t>0&&(r+=", "+t+" jours"),this.ancienneteStr=r},t.$inject=["moment"],t}();t.AncienneteController=e}(CalculetteRH||(CalculetteRH={}));var CalculetteRH;!function(t){"use strict";var e=function(){function t(){}return t.prototype.doConversion=function(){return isNaN(this.heures)||isNaN(this.minutes)||parseInt(this.minutes)>59?void(this.heureMinutes=""):void(this.heureMinutes=parseInt(this.heures)+parseInt(this.minutes)/60)},t.prototype.reverseConversion=function(){return isNaN(this.heureMinutes)?(this.heures="",void(this.minutes="")):(this.heures=Math.floor(this.heureMinutes),void(this.minutes=Math.floor(60*(this.heureMinutes-this.heures))))},t}();t.ConversionMinCentController=e}(CalculetteRH||(CalculetteRH={}));var CalculetteRH;!function(t){"use strict";var e=function(){function t(){this.tempsContrat=35,this.isInputValid=!1,this.is35hDepasse=!1}return t.prototype.doCalcul=function(){return isNaN(this.tempsContrat)||isNaN(this.tempsTotal)?(this.isInputValid=!1,this.heuresMaj25=0,void(this.heuresMaj10=0)):(this.isInputValid=!0,this.is35hDepasse=this.tempsContrat<35&&this.tempsTotal>35,this.tempsContrat<35&&this.tempsTotal>this.tempsContrat?this.heuresMaj10=Math.min(.1*this.tempsContrat,this.tempsTotal-this.tempsContrat):this.heuresMaj10=0,void(this.tempsTotal>1.1*this.tempsContrat?this.heuresMaj25=Math.max(0,35-this.tempsContrat-this.heuresMaj10):this.heuresMaj25=0))},t}();t.HeuresComplController=e}(CalculetteRH||(CalculetteRH={}));var CalculetteRH;!function(t){"use strict";var e=function(){function t(){this.tempsContrat=35,this.isInputValid=!1}return t.prototype.doCalcul=function(){return isNaN(this.tempsContrat)||isNaN(this.tempsTotal)?(this.isInputValid=!1,this.heuresMaj25=0,this.heuresMaj50=0,void(this.heuresRC=0)):(this.isInputValid=!0,void(this.tempsContrat>=35&&this.tempsTotal>=this.tempsContrat?(this.heuresMaj25=Math.min(this.tempsTotal-this.tempsContrat,43-this.tempsContrat),this.heuresMaj50=Math.max(0,this.tempsTotal-this.tempsContrat-this.heuresMaj25),this.heuresRC=Math.max(0,(this.tempsTotal-41)/2)):(this.heuresMaj25=0,this.heuresMaj50=0,this.heuresRC=0)))},t}();t.HeuresSupController=e}(CalculetteRH||(CalculetteRH={}));var CalculetteRH;!function(t){"use strict";var e=function(){function t(t){this.moment=t,this.plafondSalaire=2623.54,this.plafondIjss=43.13,this.plafondIjssMaj=57.5,this.isIjssValid=!1,this.isDateDebutValid=!1,this.showIjssMaj=!1}return t.prototype.updateIjss=function(){var t=moment(this.dateDebutStr,"DD/MM/YYYY"),e=moment(this.dateFinStr,"DD/MM/YYYY");if(!t.isValid()||t.year()<1e3)return this.isDateDebutValid=!1,void(this.isIjssValid=!1);this.isDateDebutValid=!0;var s=t.clone();if(this.moisNmoins1=s.add(-1,"month").locale("fr").format("MMMM YYYY"),this.moisNmoins2=s.add(-1,"month").locale("fr").format("MMMM YYYY"),this.moisNmoins3=s.add(-1,"month").locale("fr").format("MMMM YYYY"),!t.isValid()||!e.isValid()||e.diff(t,"day")<3)return void(this.isIjssValid=!1);this.isIjssValid=!0,s=t.clone().add(1,"day"),this.dateCarenceDebut=moment.max([s,t]),this.dateCarenceFin=this.dateCarenceDebut.clone().add(2,"day"),this.dateIjssDebut=this.dateCarenceFin.clone().add(1,"day");var i=Math.min(this.salaireNMoins3,this.plafondSalaire),n=Math.min(this.salaireNMoins2,this.plafondSalaire),a=Math.min(this.salaireNMoins1,this.plafondSalaire),r=(a+n+i)/3/(365/12)*.5;this.ijssBrut=Math.min(r,this.plafondIjss),this.ijssNet=.933*this.ijssBrut;var o=0,l=0;if(this.nbEnfants){if(this.nbEnfants<3||e.diff(this.dateCarenceDebut,"day")<=29)this.showIjssMaj=!1,this.dateIjssFin=e,this.ijssMajBrut=0,this.ijssMajNet=0;else if(this.nbEnfants>=3){this.showIjssMaj=!0;var h=(a+n+i)/3/(365/12)*.666;this.ijssMajBrut=Math.min(h,this.plafondIjssMaj),this.ijssMajNet=.933*this.ijssMajBrut,this.dateIjssFin=this.dateCarenceDebut.clone().add(29,"day"),this.dateIjssMajDebut=this.dateIjssFin.clone().add(1,"day"),this.dateIjssMajFin=e,l=this.dateIjssMajFin.diff(this.dateIjssMajDebut,"day")+1}o=this.dateIjssFin.diff(this.dateIjssDebut,"day")+1,this.nbJoursArret=o+l,this.ijssTotalBrut=o*this.ijssBrut+l*this.ijssMajBrut,this.ijssTotalNet=o*this.ijssNet+l*this.ijssMajNet}},t.$inject=["moment"],t}();t.IjssSalaireMenController=e}(CalculetteRH||(CalculetteRH={}));var CalculetteRH;!function(t){"use strict";function e(t){t.when("/",{templateUrl:"app/accueil.html"}).when("/anciennete",{templateUrl:"app/GestionPersonnel/Anciennete/anciennete.html",controller:"AncienneteController",controllerAs:"vm"}).when("/conversionMinCent",{templateUrl:"app/GestionPersonnel/ConversionMinCent/conversionMinCent.html",controller:"ConversionMinCentController",controllerAs:"vm"}).when("/heuresSup",{templateUrl:"app/GestionPersonnel/HeuresSup/heuresSup.html",controller:"HeuresSupController",controllerAs:"vm"}).when("/heuresCompl",{templateUrl:"app/GestionPersonnel/HeuresCompl/heuresCompl.html",controller:"HeuresComplController",controllerAs:"vm"}).when("/IjssSalaireMensualise",{templateUrl:"app/Paie/IjssSalaireMensualise/ijssSalaireMen.html",controller:"IjssSalaireMenController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}angular.module("calculetteApp",["ngRoute"]).constant("moment",moment).controller("AncienneteController",t.AncienneteController).controller("ConversionMinCentController",t.ConversionMinCentController).controller("HeuresSupController",t.HeuresSupController).controller("HeuresComplController",t.HeuresComplController).controller("IjssSalaireMenController",t.IjssSalaireMenController).config(["$routeProvider",e])}(CalculetteRH||(CalculetteRH={}));